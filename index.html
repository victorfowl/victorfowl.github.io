<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Home</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="assets/favicon.png" type="image/x-icon">
</head>
<body>
    <!-- Contenido principal de la página -->
    <div id="content" style="display: none;">
        <!-- Barra de navegación -->
        <nav>
            <a href="index.html">Home</a>
            <a href="projects.html">Projects</a>
            <a href="career.html">Professional Career</a>
            <a href="about.html">About Me</a>
        </nav>

        <!-- Sección de Proyectos Relevantes -->
        <div id="projects-container"></div>
    </div>

    <!-- Pantalla de carga -->
    <div id="loader">
        <img id="loading-image" src="assets/loading-image.png" alt="Cargando...">
    </div>

    <script>
        // Función para ocultar el loader y mostrar el contenido
        function showContent() {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('content').style.display = 'block';
        }

        // Cargar proyectos desde el JSON y mostrarlos en la página
        fetch('data/proyectos.json?' + new Date().getTime())
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById('projects-container');
                data.forEach((project, index) => {
                    if (project.etiquetas && project.etiquetas.includes('home')) {
                        const projectDiv = document.createElement('div');
                        projectDiv.classList.add('project');
                        projectDiv.classList.add(index % 2 === 0 ? 'odd' : 'even');

                        // Mostrar video o imagen de thumbnail
                        let mediaContent = '';
                        if (project.tipo === 'link') {
                            mediaContent = `<iframe width="560" height="315" src="${project.media}" frameborder="0" allowfullscreen></iframe>`;
                        } else if (project.tipo === 'video') {
                            mediaContent = `
                                    <div class="project-video">
                                        <video controls poster="${project.media.replace('video.mp4', 'thumbnail.png')}">
                                            <source src="${project.media}" type="video/mp4">
                                            Tu navegador no soporta videos HTML5.
                                        </video>
                                    </div>
                                `;
                        } else if (project.tipo === 'imagen') {
                            mediaContent = `<img src="${project.media}" alt="${project.titulo}">`;
                        }

                        // Agregar contenido del proyecto
                        projectDiv.innerHTML = `
                                ${mediaContent}
                                <div class="project-info">
                                    <h2>${project.titulo}</h2>
                                    <p>${project.descripcion_corta}</p>
                                    <p><strong>Empresa:</strong> ${project.empresa}</p>
                                    <p><strong>Plataformas:</strong> ${project.plataformas}</p>
                                    <p><strong>Aportación:</strong> ${project.aportacion}</p>
                                    <a href="project.html?project=${encodeURIComponent(project.titulo)}">Leer más</a>
                                </div>
                            `;
                        container.appendChild(projectDiv);
                    }
                });
                // Mostrar el contenido una vez cargado
                showContent();
            })
            .catch(error => {
                console.error('Error cargando los proyectos:', error);
                showContent();  // Asegurarse de mostrar el contenido incluso si hay un error
            });
    </script>
</body>
</html>
