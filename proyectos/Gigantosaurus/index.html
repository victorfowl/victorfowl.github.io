<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Proyecto</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="icon" href="/assets/favicon.png" type="image/x-icon">
</head>
<body>
    <!-- Barra de navegación -->
    <nav>
        <a href="/index.html">Home</a>
        <a href="/projects.html">Projects</a>
        <a href="/career.html">Professional Career</a>
        <a href="/about.html">About Me</a>
    </nav>

    <!-- Contenedor del proyecto -->
    <div id="project-container"></div>

    <script>
        // Obtener el título del proyecto desde los parámetros de la URL
        const urlParams = new URLSearchParams(window.location.search);
        const projectName = urlParams.get('project');
        console.log(projectName);
        // Función para mostrar detalles del proyecto
        function displayProjectDetails(project) {
            const container = document.getElementById('project-container');
            const projectDiv = document.createElement('div');
            projectDiv.classList.add('project-details');

            // Mostrar video o imagen de thumbnail
            let mediaContent = '';
            if (project.tipo === 'link') {
                mediaContent = `<iframe width="560" height="315" src="${project.media}" frameborder="0" allowfullscreen></iframe>`;
            } else if (project.tipo === 'video') {
                mediaContent = `
                    <div class="project-video">
                        <video controls poster="${project.media.replace('video.mp4', 'thumbnail.png')}">
                            <source src="${project.media}" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                    </div>
                `;
            } else if (project.tipo === 'imagen') {
                mediaContent = `<img src="${project.media}" alt="${project.titulo}">`;
            }

            // Mostrar los enlaces adicionales a videos si los hay
            let additionalVideos = '';
            if (project.enlaces_youtube && project.enlaces_youtube.length > 1) {
                additionalVideos = '<div class="additional-videos"><h3>Más videos:</h3><ul>';
                project.enlaces_youtube.slice(1).forEach(video => {
                    additionalVideos += `<li><a href="${video}" target="_blank">${video}</a></li>`;
                });
                additionalVideos += '</ul></div>';
            }

            // Agregar contenido del proyecto
            projectDiv.innerHTML = `
                ${mediaContent}
                <div class="project-info">
                    <h1>${project.titulo}</h1>
                    <p><strong>Descripción:</strong> ${project.descripcion_larga}</p>
                    <p><strong>Empresa:</strong> ${project.empresa}</p>
                    <p><strong>Plataformas:</strong> ${project.plataformas}</p>
                    <p><strong>Aportación:</strong> ${project.aportacion}</p>
                    <p><strong>Etiquetas:</strong> ${project.etiquetas.join(', ')}</p>
                    ${additionalVideos}
                </div>
            `;
            container.appendChild(projectDiv);
        }

        // Cargar el archivo JSON de proyectos y mostrar el proyecto actual
        fetch('/data/proyectos.json?' + new Date().getTime())
            .then(response => response.json())
            .then(data => {
                const project = data.find(p => p.titulo === projectName);
                if (project) {
                    displayProjectDetails(project);
                } else {
                    document.getElementById('project-container').innerHTML = '<p>Proyecto no encontrado.</p>';
                }
            })
            .catch(error => {
                console.error('Error al cargar el proyecto:', error);
                document.getElementById('project-container').innerHTML = '<p>Error al cargar el proyecto.</p>';
            });
    </script>

</body>
</html>
